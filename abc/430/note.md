# C 問題

i までに登場したa, b の個数の累積和を sum_a, sum_b とする。

そして、l を固定したときに a の個数が条件を満たすようになる最小の i を a_r 、 b の個数が条件を満たさなくなる最小の i を b_r とする。

すると、その l での条件を満たす r は、b_r > a_r のときに b_r - a_r となる。なので、それらの和を求めればよい。

# D 問題

イテレータを使う。人が追加されたときに影響を与えるのは、その前後の d であるので、人ごとの位置と d を map で管理して upper_bound, prev(upper_bound) を利用する。

upper_bound は存在しないかもしれないので、end() と比較して確認する。

```cpp:map:p
map<int, int> p;
```